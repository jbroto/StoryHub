<!DOCTYPE html>
<html lang="es">

<head>
    <th:block th:replace="fragments/head :: header" />
    <link rel="stylesheet" th:href="@{/css/style.css}" href="css/style.css" type="text/css" />
    <link rel="stylesheet" th:href="@{/css/comentario.css}" href="css/comentario.css" type="text/css" />
    <title>Inicio</title>
</head>

<body th:attr="data-userId=${user.id}, data-fatherId=${coment.id}">
    <header th:replace="fragments/nav.html :: nav"></header>
    <div class="contenido-background" th:style="'background-image: url(' + ${coment.media.backdropImageUrl} + ')'"></div>
    <section class="container comentario-section">
            <div class="row">
                <div class="col-md-6 mt 4">
                    <div class="card poster" onclick="irAtras()">
                        <img class="card-img-top" th:src="@{'https://image.tmdb.org/t/p/original/' + ${coment.media.coverImageUrl}}"
                          alt="portada" th:style="'height: 300px; object-fit: cover;'" />
                        <!-- el uso de th:style es porque la imagen con thymleaf no puede procesarse en el archivo css -->
                        <div class="card-body text-center textocarta">
                          <h6 class="card-title textocarta" th:text="${coment.media.nombre}">Nombre del contenido</h6>
                        </div>
                      </div>
                </div>
                <div class="col-sm-5 col-md-6 col-12 pb-4">
                    <div class="comentario-box">
                        <div class="comentario-body cabecera-comentario d-flex">
                            <img th:src="@{/user/__${coment.author.id}__/pic}" alt="" class="rounded-circle mr-3" width="40" height="40">
                            <div>
                                <h4 class="nombre-comentario mb-1" th:text="${coment.author.username}">Nombre</h4>
                                <span class="text-muted small mb-2" th:text="${coment.dateSent}">Fecha</span>
                            </div>
                        </div>
                        <div class="comentario-body">
                            <div>
                                <p class="comentario-texto" th:text="${coment.text}">Texto</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </section>

    <div class="container mb-2 mt-4">
        <h2>Comentarios</h2>
        <!--Boton para poner un comentario-->
        <h4>Add a comment</h4>
        <textarea type="text" id="commentText" placeholder="Type your comment here"></textarea><br>
        <button id="submitBtn" >Submit</button>
        <div id="comments">
            <div th:each="comentario : ${comentarios}" class="comment">
                <div class="card mt-4">
                    <a class="card-body cabecera-comentario d-flex align-items-center">
                        <img th:src="@{/user/__${comentario.author.id}__/pic}" alt=""
                            class="rounded-circle mr-3" width="40" height="40">
                        <div>
                            <h4 class="card-title nombre-comentario mb-1" th:text="${comentario.author.username}">Nombre</h4>
                        </div>
                        <span class="text-muted small mb-2" th:text="${comentario.dateSent}">Fecha</span>
                    </a>
                    <div class="card-body">
                        <span class="card-text comentario-texto" th:text="${comentario.text}">Texto</span>
                        <span>
                            <button type="button" class="btn btn-outline-danger btn-sm" data-bs-toggle="modal"
                                data-bs-target="#reporteModal">
                                ðŸš©
                            </button>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <th:block th:replace="fragments/footer.html :: footer" />
    </footer>
    <script th:src="@{/js/comentario.js}"></script>
</body>

</html>